## Учебный проект: [Deworker.pro](https://deworker.pro/edu/series/ip-geolocator)
### "Пошаговая разработка гибкого компонента IP-локатора. Пример декомпозиции сложного объекта. Практическое применение паттернов проектирования".

### 2. Ответственности и зависимости

В этом эпизоде мы рассмотрем распределение ответственности и какие могут быть зависимости, как их выносить и использовать.

Как мы можем заметить, в нашем методе locate() есть функция, которая обращается к внешнему ресурсу:
```php
public function locate(Ip $ip): ?Location
{
    // ...
    $response = file_get_contents($url);
    // ...
}
```
При этом данная функция может вернуть ошибку или не сможет подключиться и вернет false.
Чтобы отловить ошибку с данной функцей, приходилось делать так:
```php
$response = @file_get_contents($url);
if ($response === false) {
    throw new \RuntimeException(error_get_last());
}
```
~~~ 
Сохранение в Git: Обработка ошибок API
~~~
Также мы можем в дальнейшем проверять статус ответа и если вернулся не 200, то кидать ошибку.
Соответственно, чем более продвинутый код мы здесь пишем, тем больше строчек появляется и вписывать их сюда не совсем уместо,
потому что метод locate() разрастется до колосальных размеров.

Что мы можем сделать?

Например, вынести код в отдельный приватный метод, в который передавать Url.
~~~ 
Сохранение в Git: Вынесение в метод
~~~
